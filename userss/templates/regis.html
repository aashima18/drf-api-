<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<body>
    <form  method = "POST" id="login">
      {% csrf_token %}

        <div class="form-group">
          <label for="username">UserName:</label>
          <input type="text" class="form-control" id="username" placeholder="Enter name" name="username" required>
        </div>

        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" class="form-control" id="password" placeholder="Enter password" name="password">
        </div>


        <button type="submit" id="submit" class="btn btn-default">Submit</button>
      </form>
      <script type="text/javascript"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
       <script>
          $('#login').submit(function(e) {
                e.preventDefault(e);

                alert("done");
                $.ajax({
                    url: 'http://127.0.0.1:8000/api/login',
                    type: 'POST',
                  data:{
                       "username":$('#username').val(),
                       "password":$('#password').val()
                      },
                    success:function(data) {
                      alert("Hey");
                      localStorage.setItem('token', data.token);

                    },
                    error:function(errorThrown){
                      alert('Error');
                      
                    }
                });
          });      
                
        </script>
      </body>
     
    </head>

    </html>